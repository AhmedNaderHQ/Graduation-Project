<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
  <meta name="generator" content="Hugo 0.122.0">
  <title>Dashboard</title>


  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js" as="script">
  <link rel="preload" href="./3d_car.glb" as="fetch" crossorigin>


  <link href="assets/dist/css/bootstrap.min.css" rel="stylesheet">

  <link href="assets/css/colors.css" rel="stylesheet">
  <link href="assets/css/dashboard.css" rel="stylesheet">
  <link href="assets/css/enhanced-media-player.css" rel="stylesheet">
  <link href="assets/css/header-styles.css" rel="stylesheet">
  <link href="assets/css/sidebar-styles.css" rel="stylesheet">
  <link href="assets/css/user-profile.css" rel="stylesheet">
  <link href="assets/css/offcanvas-fix.css" rel="stylesheet">

  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

</head>

<body style="overflow: hidden;">
  <svg class="d-none">
    <symbol id="list" viewBox="0 0 16 16">
      <path fill-rule="evenodd"
        d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
    </symbol>
  </svg>

  <header class="navbar sticky-top bg-dark flex-md-nowrap p-0 shadow">
    <div class="navbar-brand col-md-3 col-lg-2 me-0">
      <img src="assets/images/laneloons-removebg-preview.png" alt="Dashboard Logo">
    </div>
    <div class="topbar">


      <div class="datatime">
        <div id="time"></div>
        <div id="date"></div>
      </div>


      <div class="social-icons">
        <a href="https://www.youtube.com/" target="_blank" class="social-icon youtube" title="YouTube">
          <i class="fab fa-youtube"></i>
        </a>
        <a href="https://web.whatsapp.com/" target="_blank" class="social-icon whatsapp" title="WhatsApp">
          <i class="fab fa-whatsapp"></i>
        </a>
        <a href="https://www.instagram.com/" target="_blank" class="social-icon instagram" title="Instagram">
          <i class="fab fa-instagram"></i>
        </a>
        <a href="https://twitter.com/" target="_blank" class="social-icon twitter" title="Twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </div>

      <div style="display: flex; gap: 1.2rem; align-items: center;">
        <a class="nav-notifications d-flex align-items-center gap-2 has-notifications" href="#" title="Notifications">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bell-fill"
            viewBox="0 0 16 16">
            <path
              d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2m.995-14.901a1 1 0 1 0-1.99 0A5 5 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901" />
          </svg>
        </a>
        <div class="user" title="User Profile">
          <img src="" alt="User Avatar" loading="lazy" id="userProfileBtn">
        </div>
      </div>

      <ul class="navbar-nav flex-row d-md-none">
        <li class="nav-item text-nowrap">
          <button class="nav-link px-3 text-white menu-toggle" type="button" data-bs-toggle="offcanvas"
            data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false"
            aria-label="Toggle navigation" title="Menu">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-list"
              viewBox="0 0 16 16">
              <path fill-rule="evenodd"
                d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5" />
            </svg>
          </button>
        </li>
      </ul>
    </div>
  </header>

  <div class="container-fluid">
    <div class="row">
      <div class="sidebar border border-right col-sm-2 col-md-2 col-lg-1 p-0 offcanvas-md offcanvas-end" tabindex="-1"
        id="sidebarMenu" aria-labelledby="sidebarMenuLabel">
        <div class="offcanvas-header">
          <h5 class="offcanvas-title" id="sidebarMenuLabel">Graduation</h5>
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#sidebarMenu"
            aria-label="Close"></button>
        </div>
        <div class="menu_item d-md-flex">
          <ul class="nav flex-column">
            <li class="nav-item">
              <a class="nav-link d-flex align-items-center gap-2 active" aria-current="page" href="index.html"
                data-label="Dashboard">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                  class="bi bi-house-door-fill" viewBox="0 0 16 16">
                  <path
                    d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5" />
                </svg>
                <span class="d-md-none">Dashboard</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link d-flex align-items-center gap-2" href="features.html" data-label="Features">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                  class="bi bi-ui-checks-grid" viewBox="0 0 16 16">
                  <path
                    d="M2 10h3a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1m9-9h3a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1m0 9a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1zm0-10a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM2 9a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2zm7 2a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-3a2 2 0 0 1-2-2zM0 2a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm5.354.854a.5.5 0 1 0-.708-.708L3 3.793l-.646-.647a.5.5 0 1 0-.708.708l1 1a.5.5 0 0 0 .708 0z" />
                </svg>
                <span class="d-md-none">Features</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link d-flex align-items-center gap-2" href="setting.html" data-label="Settings">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                  class="bi bi-gear-fill" viewBox="0 0 16 16">
                  <path
                    d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z" />
                </svg>
                <span class="d-md-none">Settings</span>
              </a>
            </li>
          </ul>
        </div>

      </div>

      <main class="col-md-10 ms-sm-auto col-lg-11">
        <div class="main">



          <div class="playlist-Box">
            <div class="playlist collapsed">
              <div class="playlist-header">
                <h3><i class="fas fa-upload"></i> Car Media Player</h3>
                <div class="playlist-controls">
                  <button class="shuffle-btn" title="Shuffle mode"><i class="fas fa-random"></i></button>
                  <button class="repeat-btn" title="Repeat mode"><i class="fas fa-redo"></i></button>
                  <button class="upload-media" title="Upload media files"><i class="fas fa-upload"></i></button>
                  <button class="clear-playlist" title="Clear playlist"><i class="fas fa-trash"></i></button>
                </div>
              </div>

              <div class="playlist-content">
                <!-- Media Player (Audio/Video) -->
                <div class="media-container">
                  <!-- Audio View -->
                  <div class="audio-view active">
                    <div class="now-playing">
                      <div class="track-art">
                        <img src="assets/images/album-cover.jpg" alt="Album Art">
                        <div class="play-overlay">
                          <i class="fas fa-play"></i>
                        </div>
                      </div>
                      <div class="track-info">
                        <div class="track-name">Driving Beats</div>
                        <div class="artist-name">Road Trip Mix</div>
                        <div class="progress-container">
                          <div class="progress-bar">
                            <div class="progress" style="width: 45%"></div>
                          </div>
                          <div class="time-info">
                            <span class="current-time">1:45</span>
                            <span class="total-time">3:50</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Video View -->
                  <div class="video-view">
                    <video id="video-player" controls>
                      <source src="" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                </div>

                <div class="player-controls">
                  <button class="control-btn prev"><i class="fas fa-step-backward"></i></button>
                  <button class="control-btn play-pause"><i class="fas fa-play"></i></button>
                  <button class="control-btn next"><i class="fas fa-step-forward"></i></button>
                  <div class="volume-control">
                    <i class="fas fa-volume-up"></i>
                    <input type="range" min="0" max="100" value="80" class="volume-slider">
                    <span class="volume-percentage">80%</span>
                  </div>
                  <button class="control-btn fullscreen-btn" title="Fullscreen"><i class="fas fa-expand"></i></button>
                </div>

                <div class="playlist-tracks">
                  <!-- Tracks will be dynamically added here -->
                  <div class="empty-playlist">
                    <i class="fas fa-music"></i>
                    <h3>No tracks in playlist</h3>
                    <p>Upload audio or video files to get started</p>
                  </div>
                </div>
              </div>

              <!-- Mini player (visible when collapsed) -->
              <div class="mini-player">
                <div class="mini-track-art">
                  <img src="assets/images/album-cover.jpg" alt="Album Art" id="mini-media-img">
                  <video id="mini-video" style="display: none; width: 100%; height: 100%; object-fit: cover;"></video>
                </div>
                <div class="mini-track-info">
                  <div class="mini-track-name">Driving Beats</div>
                  <div class="mini-progress-bar">
                    <div class="mini-progress" style="width: 45%"></div>
                  </div>
                </div>
                <div class="mini-controls">
                  <button class="mini-control-btn prev" title="Previous track"><i
                      class="fas fa-step-backward"></i></button>
                  <button class="mini-control-btn play-pause" title="Play/Pause"><i class="fas fa-play"></i></button>
                  <button class="mini-control-btn next" title="Next track"><i class="fas fa-step-forward"></i></button>
                  <div class="mini-volume-control">
                    <button class="mini-volume-btn" title="Volume control"><i class="fas fa-volume-up"></i></button>
                    <input type="range" min="0" max="100" value="80" class="mini-volume-slider" title="Volume">
                  </div>
                </div>
              </div>

              <!-- Hidden file input for uploading media -->
              <input type="file" id="media-upload" accept="audio/*,video/*" multiple style="display: none;">

              <!-- Drag and drop overlay -->
              <div class="drag-drop-overlay" style="display: none;">
                <div class="drag-drop-content">
                  <i class="fas fa-cloud-upload-alt"></i>
                  <h3>Drop your media files here</h3>
                  <p>Support for audio and video files</p>
                </div>
              </div>

              <!-- Hidden audio element -->
              <audio id="audio-player" style="display: none;">
                <source src="" type="audio/mpeg">
              </audio>
            </div>
          </div>

          <!-- Media Player Modal -->
          <div id="mediaPlayerModal" class="media-modal">
            <div class="media-modal-content">
              <div class="media-modal-header">
                <h3><i class="fas fa-video"></i> Car Video Player</h3>
                <div class="media-modal-controls">
                  <button class="close-modal"><i class="fas fa-times"></i></button>
                </div>
              </div>

              <div class="media-modal-body">
                <!-- Media Player (Audio/Video) -->
                <div class="modal-media-container">
                  <!-- Audio View -->
                  <div class="modal-audio-view active">
                    <div class="modal-now-playing">
                      <div class="modal-track-art">
                        <img src="assets/images/album-cover.jpg" alt="Album Art">
                        <div class="modal-play-overlay">
                          <i class="fas fa-play"></i>
                        </div>
                      </div>
                      <div class="modal-track-info">
                        <div class="modal-track-name">Driving Beats</div>
                        <div class="modal-artist-name">Road Trip Mix</div>
                        <div class="modal-progress-container">
                          <div class="modal-progress-bar">
                            <div class="modal-progress" style="width: 45%"></div>
                          </div>
                          <div class="modal-time-info">
                            <span class="modal-current-time">1:45</span>
                            <span class="modal-total-time">3:50</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Video View -->
                  <div class="modal-video-view">
                    <div class="video-loading" style="display: none;">
                      <div class="loading-spinner"></div>
                      <p>Loading video...</p>
                    </div>
                    <video id="modal-video-player" controls preload="metadata" style="width: 100%; height: auto;">
                      <source src="" type="video/mp4">
                      <source src="" type="video/webm">
                      <source src="" type="video/ogg">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                </div>

                <div class="modal-player-controls">
                  <button class="modal-control-btn prev"><i class="fas fa-step-backward"></i></button>
                  <button class="modal-control-btn play-pause"><i class="fas fa-play"></i></button>
                  <button class="modal-control-btn next"><i class="fas fa-step-forward"></i></button>
                  <div class="modal-volume-control">
                    <i class="fas fa-volume-up"></i>
                    <input type="range" min="0" max="100" value="80" class="modal-volume-slider">
                    <span class="modal-volume-percentage">80%</span>
                  </div>
                  <button class="modal-control-btn fullscreen-btn" title="Fullscreen"><i
                      class="fas fa-expand"></i></button>
                  <button class="modal-control-btn picture-in-picture-btn" title="Picture in Picture"><i
                      class="fas fa-external-link-alt"></i></button>
                </div>

                <div class="modal-playlist-tracks">
                  <!-- Modal tracks will be dynamically added here -->
                  <div class="empty-playlist">
                    <i class="fas fa-music"></i>
                    <h3>No tracks in playlist</h3>
                    <p>Upload audio or video files to get started</p>
                  </div>
                </div>
              </div>

              <!-- Hidden audio element for modal -->
              <audio id="modal-audio-player" style="display: none;">
                <source src="" type="audio/mpeg">
              </audio>
            </div>
          </div>

          <!-- ======================= recent customers ================== -->
          <div class="Speed">
            <div class="car-info">
              <div class="car-model">
                <h3> </h3>
                <p>2025 Release Edition</p>
              </div>
              <div class="drive-modes">
                <div class="mode">P</div>
                <div class="mode">R</div>
                <div class="mode">N</div>
                <div class="mode active">D</div>
                <div class="mode">S</div>
              </div>

              <div id="car-container"></div>
              <canvas id="speedometer"></canvas>


              <div class="indicators">
                <div class="indicator battery">
                  <i class="fas fa-battery-three-quarters battery-icon"></i>
                  <div class="indicator-info">
                    <div class="battery-status">
                      <span class="value" id="battery-level">45%</span>
                      <span class="charging-status" id="charging-status">On Battery</span>
                    </div>
                    <div class="progress-bar">
                      <div class="progress" id="battery-progress" style="width: 45%"></div>
                    </div>
                  </div>
                </div>

                <div class="indicator fuel">
                  <i class="fas fa-gas-pump"></i>
                  <div class="indicator-info">
                    <div class="fuel-status">
                      <span class="value" id="fuel-level">70%</span>
                      <span class="fuel-state" id="fuel-state">Normal</span>
                    </div>
                    <div class="progress-bar">
                      <div class="progress" id="fuel-progress" style="width: 70%"></div>
                    </div>
                  </div>
                </div>

                <div class="indicator distance">
                  <i class="fas fa-road"></i>
                  <div class="indicator-info">
                    <span class="value" id="distance-value">0.0</span>
                    <span class="unit">km</span>
                  </div>
                </div>

                <div class="indicator time">
                  <i class="fas fa-clock"></i>
                  <div class="indicator-info">
                    <span class="value" id="time-value">0:00</span>
                    <span class="unit">Hours</span>
                  </div>
                </div>


              </div>
            </div>
          </div>
          <div class="map">
            <iframe src="map-new.html" style="width: 100%;height: 100%;" frameborder="0"></iframe>
            <!-- <style>

            </style>
            <div id="map"></div>
            <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
            <script type="module">
              import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
              import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js";

              const firebaseConfig = {
                apiKey: "AIzaSyBhrthJEbCEt6bjWnzOO-iFQm1oDc5Ikgw",
                authDomain: "maps-effb1.firebaseapp.com",
                databaseURL: "https://maps-effb1-default-rtdb.firebaseio.com",
                projectId: "maps-effb1",
                storageBucket: "maps-effb1.appspot.com",
                messagingSenderId: "956469747194",
                appId: "1:956469747194:web:9b32c2f0dd464f9d1a9843"
              };

              const app = initializeApp(firebaseConfig);
              const db = getDatabase(app);

              const map = L.map('map').setView([31.0357, 31.2497], 13);
              L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; OpenStreetMap contributors'
              }).addTo(map);

              const marker = L.marker([30.0444, 31.2357]).addTo(map);

              const carRef = ref(db, 'car/location');
              onValue(carRef, (snapshot) => {
                const data = snapshot.val();
                if (data && data.latitude && data.longitude) {
                  marker.setLatLng([data.latitude, data.longitude]);
                  map.setView([data.latitude, data.longitude]);
                }
              });
            </script> -->
          </div>
          <div class="Services">
            <div class="r">
              <!-- <div class="card"> -->
              <div class="search">
                <div class="searchBox">
                  <input id="searchInput" type="text" placeholder="Enter city name" />
                  <button id="searchBtn" title="Search for city">
                    <img src="assets/images/Weather/search.png" alt="Search" />
                  </button>
                </div>
                <button id="currentLocationBtn" title="Use current location">
                  <img src="assets/images/Weather/bi--geo-alt-fill.png" alt="Location" />
                </button>
              </div>
              <div class="weather">
                <img src="assets/images/Weather/rain.png" class="weather-icon" loading="lazy" />
                <h1 class="temp"></h1>
                <h2 class="city"></h2>
                <div class="details">
                  <div class="col">
                    <img src="assets/images/Weather/humidity.png" loading="lazy" />
                    <div>
                      <p class="humidity"></p>
                      <p>Humidity</p>
                    </div>
                  </div>
                  <div class="col">
                    <img src="assets/images/Weather/wind.png" loading="lazy" />
                    <div>
                      <p class="wind"></p>
                      <p>Wind Speed</p>
                    </div>
                  </div>
                </div>
              </div>
              <!-- </div> -->
            </div>
            <div class="r2">
              <div class="status-panel">
                <div class="status-card driver">
                  <div class="status-icon">
                    <i class="fas fa-user-shield"></i>
                  </div>
                  <div class="status-info">
                    <h3>Driver Status</h3>
                    <span class="status-badge active">Active</span>
                    <p class="status-time">Since 2:30 PM</p>
                  </div>
                </div>

                <div class="status-card connection">
                  <div class="status-icon">
                    <i class="fas fa-wifi"></i>
                  </div>
                  <div class="status-info">
                    <h3>Connection</h3>
                    <div class="signal-bars">
                      <span class="bar active"></span>
                      <span class="bar active"></span>
                      <span class="bar active"></span>
                      <span class="bar"></span>
                    </div>
                    <p>Strong Signal</p>
                  </div>
                </div>

                <div class="status-card health">
                  <div class="status-icon">
                    <i class="fas fa-car"></i>
                  </div>
                  <div class="status-info">
                    <h3>Car Health</h3>
                    <div class="health-indicator good">
                      <span class="health-dot"></span>
                      <span class="health-text">Good Condition</span>
                    </div>
                  </div>
                </div>

                <button class="sos-button">
                  <i class="fas fa-exclamation-triangle"></i>
                  <span>SOS Emergency</span>
                </button>
              </div>
            </div>
          </div>

        </div>
      </main>
    </div>
  </div>
  <script src="assets/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>


  <script src="assets/js/firebase-config.js"></script>
  <script src="assets/js/session-manager.js"></script>
  <script src="assets/js/auth-guard.js"></script>
  <script src="assets/js/user-profile.js"></script>
  <script src="assets/js/profile-loader.js"></script>
  <script src="assets/js/notifications.js"></script>
  <script src="assets/js/enhanced-notifications.js"></script>
  <script src="assets/js/smart-alerts.js"></script>
  <script src="assets/js/connection-manager.js"></script>
  <script src="assets/js/enhanced-media-player.js"></script>
  <script src="assets/js/dashboard.js"></script>
  <script src="assets/js/weather.js"></script>
  <script src="assets/js/distance-time-tracker.js"></script>
  <script src="assets/js/speedometer.js"></script>
  <script src="assets/js/offcanvas-fix.js"></script>

  <script>

    function removeOffcanvasBackdrop() {

      const backdrops = document.querySelectorAll('.offcanvas-backdrop');
      backdrops.forEach(backdrop => {
        backdrop.remove();
      });


      document.body.style.overflow = 'auto';
      document.body.classList.remove('modal-open');
    }


    removeOffcanvasBackdrop();


    document.addEventListener('DOMContentLoaded', function () {
      removeOffcanvasBackdrop();

      const sidebarMenu = document.getElementById('sidebarMenu');
      if (sidebarMenu) {
        sidebarMenu.addEventListener('hidden.bs.offcanvas', function () {
          removeOffcanvasBackdrop();
        });

        sidebarMenu.addEventListener('hide.bs.offcanvas', function () {
          removeOffcanvasBackdrop();
        });
      }
    });
  </script>


  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" media="print"
    onload="this.media='all'">

  <style>
    .user-window {
      background: var(--gradient-card);
      border-radius: var(--border-radius-md);
      padding: 20px;
      color: var(--text-white);
      width: 450px;
      /* زيادة العرض */
      position: fixed;
      top: 80px;
      right: 20px;
      z-index: 1000;
      box-shadow: var(--shadow-lg);
      min-width: 400px;
      backdrop-filter: blur(10px);
      border: 1px solid var(--bg-hover-white);
      display: none;
      height: 85%;
      overflow: auto;
    }

    .profile-header {
      text-align: center;
      padding: 25px 0;
      position: relative;
      background: linear-gradient(180deg, rgba(33, 150, 243, 0.1), transparent);
      border-radius: var(--border-radius-md);
      margin-bottom: 20px;
    }

    .profile-image {
      position: relative;
      width: 150px;
      /* زيادة حجم الصورة */
      height: 150px;
      margin: 0 auto;
    }

    /* تم إزالة التأثير الانتقالي للأداء الأفضل */
    .profile-image img {
      width: 100%;
      height: 100%;
      border-radius: var(--border-radius-circle);
      object-fit: cover;
      border: 4px solid var(--material-blue);
      box-shadow: 0 0 10px rgba(33, 150, 243, 0.3);
    }

    /* تم تعطيل التأثير للأداء الأفضل */
    .profile-image button {
      position: absolute;
      bottom: 10%;
      left: 75%;
    }


    .profile-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin: 20px 0;
      padding: 15px;
      background: var(--bg-hover-white);
      border-radius: var(--border-radius-md);
    }

    .stat-item {
      text-align: center;
      padding: 10px;
    }

    .stat-value {
      font-size: 1.5em;
      font-weight: bold;
      color: var(--material-blue);
    }

    .stat-label {
      font-size: 0.9em;
      color: var(--text-secondary);
    }

    .profile-details {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      padding: 20px;
      background: var(--bg-hover-white);
      border-radius: var(--border-radius-md);
      margin: 15px 0;
    }

    .info-group {
      position: relative;
      padding-left: 30px;
    }

    .info-group i {
      position: absolute;
      left: 0;
      top: 3px;
      color: var(--material-blue);
    }

    .profile-actions {
      display: grid;
      /* grid-template-columns: repeat(2, 1fr);
      gap: 15px; */
      margin-top: 25px;
    }

    .profile-actions button {
      padding: 12px;
      border: none;
      border-radius: var(--border-radius-sm);
      cursor: pointer;
      transition: var(--transition-normal);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 1.1em;
    }

    .edit-profile-btn {
      background: var(--material-blue);
      color: var(--text-white);
    }

    .settings-btn {
      background: var(--bg-hover-white-light);
      color: var(--text-white);
      border: 1px solid var(--bg-hover-white-medium);
    }

    /* تم تبسيط التأثير للأداء الأفضل */
    .profile-actions button:hover {
      background-color: var(--text-blue-light);
    }

    /* تأثير الظهور المبسط للأداء الأفضل */
    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    .user-window.show {
      display: block;
      animation: fadeIn 0.3s ease-out forwards;
    }

    /* إضافة شريط التقدم */
    .progress-section {
      margin: 20px 0;
    }

    .progress-item {
      margin: 15px 0;
    }

    .progress-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 5px;
    }

    .progress-bar {
      height: 6px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 3px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: var(--material-blue);
      border-radius: 3px;
      transition: width 0.3s ease;
    }

    /* تحسين التصميم المتجاوب */
    @media (max-width: 768px) {
      .user-window {
        width: 90%;
        right: 5%;
        min-width: unset;
      }

      .profile-details {
        grid-template-columns: 1fr;
      }

      .profile-stats {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    /* تصميم مؤشرات البطارية والوقود */
    .indicators {
      display: flex;
      flex-wrap: wrap;
      column-gap: 15px;
      justify-content: space-between;
      /* padding: 12px; */
      position: relative;
      margin-top: 5px;
      /* z-index: 10; */
      width: 100%;
      /* background: rgba(0, 0, 0, 0.6);
      border-radius: 12px; */
      backdrop-filter: blur(10px);
    }

    .indicator {
      display: flex;
      align-items: center;
      gap: 1px;
      padding: 3px;
      color: var(--text-white);
      flex: 1;
      justify-content: center;
    }

    /* تبسيط الخلفية والتأثيرات للأداء الأفضل */
    .indicator i {
      font-size: 1.3rem;
      min-width: 20px;
      text-align: center;
      background: var(--bg-hover-white);
      padding: 8px;
      border-radius: 10px;
    }

    .indicator.battery i {
      color: var(--success-light);
      text-shadow: var(--text-shadow-success);
    }

    .indicator.distance i {
      color: var(--material-blue);
      text-shadow: var(--text-shadow-material-blue);
    }

    .indicator.time i {
      color: var(--material-purple);
      text-shadow: var(--text-shadow-material-purple);
    }

    .indicator.fuel i {
      color: var(--warning-light);
      text-shadow: 0 0 10px rgba(255, 193, 7, 0.5);
    }

    /* تم تعطيل تأثير التحويم للأداء الأفضل */
    .indicator .value {
      font-size: 0.9rem;
      font-weight: bold;
      white-space: nowrap;
    }

    .indicator .unit {
      font-size: 0.7rem;
      opacity: 0.8;
    }

    .indicator .progress-bar {
      width: 100%;
      height: 3px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 2px;
      margin-top: 2px;
    }

    /* تم إزالة التأثير الانتقالي للأداء الأفضل */
    .indicator .progress {
      height: 100%;
      border-radius: 2px;
    }

    .battery-status {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .charging-status {
      font-size: 0.7rem;
      padding: 2px 6px;
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.1);
    }

    /* تبسيط الألوان للأداء الأفضل */
    .battery .progress.high {
      background: #4CAF50;
    }

    .battery .progress.medium {
      background: #FFC107;
    }

    .battery .progress.low {
      background: #f44336;
    }

    /* تم تبسيط تأثير الشحن للأداء الأفضل */
    .battery-icon.charging {
      color: #4CAF50;
    }

    .fuel-status {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .fuel-state {
      font-size: 0.7rem;
      padding: 2px 6px;
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.1);
    }

    /* تم إزالة التأثير الانتقالي للأداء الأفضل */

    /* تبسيط الألوان للأداء الأفضل */
    .fuel .progress.high {
      background: #4CAF50;
    }

    .fuel .progress.medium {
      background: #FFC107;
    }

    .fuel .progress.low {
      background: #f44336;
    }

    /* تم تبسيط تأثير التحذير للأداء الأفضل */
    .fuel-icon.warning {
      color: #FF5722;
    }

    /* تحسين التجاوب */
    @media (max-width: 768px) {
      .indicators {
        flex-wrap: wrap;
        gap: 8px;
      }

      .indicator {
        min-width: calc(50% - 8px);
      }
    }

    /* تحسينات قسم الطقس - تم تصغير الأحجام لتناسب المساحة */
    .search {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
      scale: 0.9;
    }

    .searchBox {
      display: flex;
      align-items: center;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 20px;
      padding: 3px 10px;
      flex: 1;
      margin-right: 8px;
    }

    #searchInput {
      background: transparent;
      border: none;
      outline: none;
      color: rgb(55, 54, 54);
      padding: 5px 8px;
      font-size: 12px;
      width: 100%;
    }

    #searchInput::placeholder {
      color: rgba(255, 255, 255, 0.5);
    }

    #searchBtn {
      background: transparent;
      border: none;
      cursor: pointer;
      padding: 3px;
    }

    #searchBtn img {
      width: 16px;
      height: 16px;
    }

    #currentLocationBtn {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.2s;
    }

    #currentLocationBtn:hover {
      background: rgba(0, 255, 255, 0.4);
    }

    #currentLocationBtn img {
      width: 16px;
      height: 16px;
    }

    .weather {
      text-align: center;
      padding: 5px 0;
    }

    .weather-icon {
      width: 50px;
      height: 50px;
      margin-bottom: 5px;
    }

    .temp {
      font-size: 2rem;
      font-weight: bold;
      margin: 0;
      color: white;
    }

    .city {
      font-size: 1rem;
      margin: 5px 0;
      color: rgba(255, 255, 255, 0.8);
    }

    .details {
      display: flex;
      justify-content: space-around;
      margin-top: 10px;
    }

    .col {
      display: flex;
      align-items: center;
      text-align: left;
    }

    .col img {
      width: 20px;
      height: 20px;
      margin-right: 5px;
    }

    .col p {
      margin: 1px 0;
      font-size: 11px;
    }

    .col p:first-child {
      font-size: 13px;
      font-weight: bold;
    }

    /* تعديل حجم العنصر r */
    .r {
      padding: 10px;
      height: auto;
      min-height: 200px;
      display: flex;
      flex-direction: column;
    }

    /* تعديل حجم العنصر r2 */
    .r2 {
      padding: 10px;
      height: auto;
      min-height: 200px;
      display: flex;
      flex-direction: column;
      background: linear-gradient(145deg, #1a1a1a, #2a2a2a);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    }

    .r2:hover {
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
    }

    /* تصغير حجم status-panel */
    .status-panel {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.4rem;
      padding: 0.3rem;
      height: 100%;
      margin: 0;
    }

    .status-card {
      background: rgba(26, 26, 26, 0.7);
      border-radius: 8px;
      padding: 0.4rem;
      display: flex;
      align-items: center;
      gap: 0.3rem;
      min-height: 40px;
      border: 1px solid rgba(44, 44, 44, 0.5);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
    }

    .status-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      border-color: #00ffff;
    }

    .status-icon {
      width: 24px;
      height: 24px;
      border-radius: 6px;
      font-size: 0.8rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .driver .status-icon {
      background: linear-gradient(135deg, rgba(46, 204, 113, 0.3), rgba(46, 204, 113, 0.1));
      box-shadow: 0 0 10px rgba(46, 204, 113, 0.3);
      color: #2ecc71;
    }

    .connection .status-icon {
      background: linear-gradient(135deg, rgba(52, 152, 219, 0.3), rgba(52, 152, 219, 0.1));
      box-shadow: 0 0 10px rgba(52, 152, 219, 0.3);
      color: #3498db;
    }

    .health .status-icon {
      background: linear-gradient(135deg, rgba(241, 196, 15, 0.3), rgba(241, 196, 15, 0.1));
      box-shadow: 0 0 10px rgba(241, 196, 15, 0.3);
      color: #f1c40f;
    }

    .alerts .status-icon {
      background: linear-gradient(135deg, rgba(155, 89, 182, 0.3), rgba(155, 89, 182, 0.1));
      box-shadow: 0 0 10px rgba(155, 89, 182, 0.3);
      color: #9b59b6;
    }

    .status-info h3 {
      font-size: 0.7rem;
      font-weight: bold;
      color: #ffffff;
      margin-bottom: 0.2rem;
    }

    .status-badge {
      padding: 0.1rem 0.4rem;
      border-radius: 10px;
      font-size: 0.6rem;
      font-weight: bold;
      text-transform: uppercase;
    }

    .status-badge.active {
      background: linear-gradient(135deg, #2ecc71, #27ae60);
      box-shadow: 0 2px 6px rgba(46, 204, 113, 0.4);
      color: white;
    }

    .status-badge.normal {
      background: linear-gradient(135deg, #9b59b6, #8e44ad);
      box-shadow: 0 2px 6px rgba(155, 89, 182, 0.4);
      color: white;
    }

    .status-time,
    .health-text {
      font-size: 0.6rem;
      color: #aaa;
      margin: 0.1rem 0 0 0;
    }

    .health-indicator {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .health-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #2ecc71;
      box-shadow: 0 0 6px rgba(46, 204, 113, 0.6);
    }

    .sos-button {
      grid-column: span 2;
      background: linear-gradient(135deg, #e74c3c, #c0392b);
      color: white;
      padding: 0.5rem;
      font-size: 0.8rem;
      border-radius: 8px;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.4rem;
      margin-top: 0.4rem;
      font-weight: bold;
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(231, 76, 60, 0.3);
    }

    .sos-button:hover {
      background: linear-gradient(135deg, #c0392b, #e74c3c);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(231, 76, 60, 0.5);
      animation: pulse 1.5s infinite;
    }

    .sos-button i {
      font-size: 0.9rem;
    }

    @keyframes pulse {
      0% {
        transform: translateY(-2px) scale(1);
      }

      50% {
        transform: translateY(-2px) scale(1.03);
      }

      100% {
        transform: translateY(-2px) scale(1);
      }
    }



    /* تم إزالة التأثير الانتقالي للأداء الأفضل */

    /* تنسيق النوافذ المنبثقة لمواقع التواصل الاجتماعي */
    .social-modal {
      background: linear-gradient(145deg, #1a1a1a, #2a2a2a);
      color: white;
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
    }

    .modal-header {
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding: 15px 20px;
    }

    .youtube-header {
      background: linear-gradient(135deg, rgba(255, 0, 0, 0.8), rgba(180, 0, 0, 0.8));
    }

    .whatsapp-header {
      background: linear-gradient(135deg, rgba(37, 211, 102, 0.8), rgba(18, 140, 65, 0.8));
    }

    .instagram-header {
      background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
    }

    .twitter-header {
      background: linear-gradient(135deg, rgba(29, 161, 242, 0.8), rgba(25, 118, 210, 0.8));
    }

    .modal-title {
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .modal-body {
      padding: 20px;
    }

    .btn-close {
      background-color: rgba(255, 255, 255, 0.5);
      opacity: 1;
    }















    /* ======================= Media Player Modal ====================== */
    .media-modal {
      display: none;
      position: fixed;
      z-index: 9999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(5px);
    }

    .media-modal.show {
      display: block !important;
    }

    .media-modal-content {
      background: linear-gradient(145deg, #1a1a1a, #2a2a2a);
      margin: 1% auto;
      padding: 0;
      border-radius: 20px;
      width: 95%;
      max-width: 900px;
      max-height: 95vh;
      overflow: hidden;
      box-shadow: 0 25px 80px rgba(0, 0, 0, 0.7);
      border: 1px solid rgba(0, 255, 255, 0.2);
      animation: modalSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      backdrop-filter: blur(20px);
    }

    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translateY(-30px) scale(0.95);
      }

      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @keyframes modalSlideOut {
      from {
        opacity: 1;
        transform: translateY(0) scale(1);
      }

      to {
        opacity: 0;
        transform: translateY(-30px) scale(0.95);
      }
    }

    .media-modal.closing .media-modal-content {
      animation: modalSlideOut 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    }

    .media-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 25px;
      background: linear-gradient(135deg, rgba(0, 255, 255, 0.1), rgba(0, 150, 255, 0.1));
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .media-modal-header h3 {
      color: var(--primary-color, #00ffff);
      font-size: 1.4rem;
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 0;
    }

    .media-modal-controls {
      display: flex;
      gap: 10px;
    }

    .close-modal {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: white;
      font-size: 1rem;
      cursor: pointer;
      width: 35px;
      height: 35px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .close-modal:hover {
      background: rgba(255, 0, 0, 0.4);
      transform: scale(1.1);
      box-shadow: 0 0 15px rgba(255, 0, 0, 0.4);
    }

    .media-modal-body {
      padding: 25px;
      max-height: calc(90vh - 100px);
      overflow-y: auto;
    }

    /* Modal Media Container */
    .modal-media-container {
      position: relative;
      border-radius: 15px;
      overflow: hidden;
      background: rgba(0, 0, 0, 0.3);
      margin-bottom: 20px;
    }

    .modal-audio-view,
    .modal-video-view {
      display: none;
    }

    .modal-audio-view.active {
      display: block;
    }

    .modal-video-view.active {
      display: block !important;
      position: relative;
      width: 100%;
      min-height: 350px;
    }

    #modal-video-player {
      width: 100% !important;
      height: 350px !important;
      min-height: 300px;
      max-height: 450px;
      border-radius: 15px;
      background: #000 !important;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      display: block !important;
      object-fit: contain;
      outline: none;
      border: 2px solid #00ffff;
      visibility: visible !important;
      opacity: 1 !important;
    }

    #modal-video-player::-webkit-media-controls-panel {
      background-color: rgba(0, 0, 0, 0.8);
    }

    /* Video Loading Indicator */
    .video-loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      color: white;
      z-index: 10;
    }

    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 4px solid rgba(0, 255, 255, 0.3);
      border-top: 4px solid #00ffff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 15px;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    .video-loading p {
      margin: 0;
      font-size: 1.1rem;
      color: #00ffff;
    }

    /* Modal Now Playing */
    .modal-now-playing {
      display: flex;
      gap: 20px;
      padding: 20px;
      border-radius: 15px;
    }

    .modal-track-art {
      width: 120px;
      height: 120px;
      border-radius: 15px;
      overflow: hidden;
      position: relative;
      flex-shrink: 0;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .modal-track-art img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .modal-play-overlay {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 50px;
      height: 50px;
      background: rgba(0, 255, 255, 0.9);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      opacity: 0;
    }

    .modal-track-art:hover .modal-play-overlay {
      opacity: 1;
    }

    .modal-track-info {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 10px;
    }

    .modal-track-name {
      font-size: 1.8rem;
      font-weight: bold;
      color: white;
      margin-bottom: 5px;
    }

    .modal-artist-name {
      font-size: 1.2rem;
      color: #aaa;
      margin-bottom: 15px;
    }

    .modal-progress-container {
      width: 100%;
    }

    .modal-progress-bar {
      width: 100%;
      height: 6px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 3px;
      overflow: hidden;
      margin-bottom: 8px;
      cursor: pointer;
    }

    .modal-progress {
      height: 100%;
      background: linear-gradient(90deg, var(--primary-color, #00ffff), #0099cc);
      border-radius: 3px;
      transition: width 0.3s ease;
    }

    .modal-time-info {
      display: flex;
      justify-content: space-between;
      font-size: 0.9rem;
      color: #ccc;
    }

    /* Modal Player Controls */
    .modal-player-controls {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      padding: 20px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 15px;
      margin-bottom: 20px;
    }

    .modal-control-btn {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .modal-control-btn:hover {
      background: rgba(0, 255, 255, 0.2);
      transform: scale(1.1);
    }

    .modal-control-btn.play-pause {
      background: var(--primary-color, #00ffff);
      color: #000;
      width: 60px;
      height: 60px;
      font-size: 1.4rem;
    }

    .modal-control-btn.play-pause:hover {
      background: #00cccc;
      transform: scale(1.1);
    }

    .modal-volume-control {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-left: 20px;
    }

    .modal-volume-control i {
      color: var(--primary-color, #00ffff);
      font-size: 1.1rem;
    }

    .modal-volume-slider {
      width: 100px;
      height: 4px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 2px;
      outline: none;
      cursor: pointer;
    }

    .modal-volume-slider::-webkit-slider-thumb {
      appearance: none;
      width: 16px;
      height: 16px;
      background: var(--primary-color, #00ffff);
      border-radius: 50%;
      cursor: pointer;
    }

    /* Modal Playlist Tracks */
    .modal-playlist-tracks {
      max-height: 250px;
      overflow-y: auto;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 15px;
      padding: 15px;
    }

    .modal-playlist-track {
      display: flex;
      align-items: center;
      padding: 12px;
      border-radius: 10px;
      margin-bottom: 8px;
      transition: all 0.3s ease;
      cursor: pointer;
      border: 1px solid transparent;
    }

    .modal-playlist-track:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(0, 255, 255, 0.3);
    }

    .modal-playlist-track.active {
      background: rgba(0, 255, 255, 0.1);
      border-color: var(--primary-color, #00ffff);
    }

    .modal-track-number {
      width: 30px;
      text-align: center;
      font-size: 0.9rem;
      color: #aaa;
      font-weight: bold;
    }

    .modal-track-details {
      flex-grow: 1;
      margin-left: 15px;
    }

    .modal-track-title {
      font-size: 1rem;
      color: white;
      font-weight: 500;
      margin-bottom: 2px;
    }

    .modal-track-artist {
      font-size: 0.85rem;
      color: #aaa;
    }

    .modal-track-duration {
      font-size: 0.85rem;
      color: #aaa;
      margin-left: 15px;
    }

    /* Modal Scrollbar */
    .media-modal-body::-webkit-scrollbar,
    .modal-playlist-tracks::-webkit-scrollbar {
      width: 6px;
    }

    .media-modal-body::-webkit-scrollbar-track,
    .modal-playlist-tracks::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
    }

    .media-modal-body::-webkit-scrollbar-thumb,
    .modal-playlist-tracks::-webkit-scrollbar-thumb {
      background: rgba(0, 255, 255, 0.3);
      border-radius: 10px;
    }

    .media-modal-body::-webkit-scrollbar-thumb:hover,
    .modal-playlist-tracks::-webkit-scrollbar-thumb:hover {
      background: var(--primary-color, #00ffff);
    }

    /* Modal Responsive */
    @media (max-width: 768px) {
      .media-modal-content {
        width: 95%;
        margin: 5% auto;
      }

      .modal-now-playing {
        flex-direction: column;
        text-align: center;
      }

      .modal-track-art {
        width: 150px;
        height: 150px;
        margin: 0 auto;
      }

      .modal-player-controls {
        gap: 15px;
      }

      .modal-volume-control {
        margin-left: 0;
        margin-top: 10px;
      }
    }

    .Services {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      justify-content: space-between;
      width: 29%;
    }

    .Services .r,
    .Services .r2 {
      flex: 1;
      min-width: 250px;
      max-width: 100%;
    }

  </style>

  <script>
    let scene, camera, renderer, controls;

    function init() {
      scene = new THREE.Scene();
      scene.background = null; 

      camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
      camera.position.set(10, 8, 10); 

      renderer = new THREE.WebGLRenderer({
        antialias: false, 
        alpha: true, 
        premultipliedAlpha: false,
        preserveDrawingBuffer: false, 
        powerPreference: "high-performance"
      });
      renderer.setClearColor(0x000000, 0); 
      renderer.setPixelRatio(window.devicePixelRatio); 
      renderer.setSize(document.getElementById('car-container').offsetWidth,
        document.getElementById('car-container').offsetHeight);
      renderer.outputEncoding = THREE.sRGBEncoding;
      renderer.toneMapping = THREE.ReinhardToneMapping; 
      renderer.toneMappingExposure = 1.0; 
      renderer.shadowMap.enabled = false; 
      renderer.physicallyCorrectLights = false;
      document.getElementById('car-container').appendChild(renderer.domElement);

      controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = false; 
      controls.target.set(0, 0, 0);
      controls.rotateSpeed = 0.7;
      controls.zoomSpeed = 1.0;
      controls.panSpeed = 0.8;
      controls.minDistance = 5;
      controls.maxDistance = 20;
      controls.maxPolarAngle = Math.PI / 2;
      controls.enableZoom = true;
      controls.enablePan = false; 

      renderer.domElement.addEventListener('dblclick', resetView);
      renderer.domElement.addEventListener('touchstart', onTouchStart, false);
      renderer.domElement.addEventListener('touchmove', onTouchMove, false);
      const ambientLight = new THREE.AmbientLight(0xffffff, 1.2);
      scene.add(ambientLight);

      const mainLight = new THREE.DirectionalLight(0xffffff, 1.5);
      mainLight.position.set(10, 10, 10);
      mainLight.castShadow = false; 
      scene.add(mainLight);

      const loader = new THREE.GLTFLoader();
      loader.setPath('./');

      let modelScale = 23; 
      let modelPosition = { x: 0, y: -2, z: 0 };

      loader.load('./bmw.glb', (gltf) => {
        const model = gltf.scene;
        model.scale.set(4, 4, 4); 
        model.position.set(0, -2, 0);

        model.traverse((node) => {
          if (node.isMesh) {
            node.castShadow = false;
            node.receiveShadow = false;

            if (node.material) {
              node.material.envMapIntensity = 0.5;
              node.material.roughness = 0.8;
              node.material.metalness = 0.5;

              if (node.material.normalMap) node.material.normalMap = null;
              if (node.material.roughnessMap) node.material.roughnessMap = null;
              if (node.material.metalnessMap) node.material.metalnessMap = null;
              if (node.material.aoMap) node.material.aoMap = null;

              if (node.material.map) {
                node.material.map.minFilter = THREE.LinearFilter;
                node.material.map.generateMipmaps = false;
              }
            }
          }
        });

        scene.add(model);

               window.changeModelSize = function(newScale) {
          modelScale = newScale;
          model.scale.set(modelScale, modelScale, modelScale);
        };

               window.changeModelPosition = function(x, y, z) {
          modelPosition = { x, y, z };
          model.position.set(x, y, z);
        };

        const box = new THREE.Box3().setFromObject(model);
        const center = box.getCenter(new THREE.Vector3());
        controls.target.copy(center);
      });

      animate();
    }

    let lastFrameTime = 0;
    const targetFPS = 25; 
    const frameInterval = 1000 / targetFPS;

    function animate(currentTime) {
      requestAnimationFrame(animate);

      const deltaTime = currentTime - lastFrameTime;
      if (deltaTime < frameInterval) return;

      lastFrameTime = currentTime - (deltaTime % frameInterval);

      controls.update();

      renderer.render(scene, camera);
    }

    function resetView() {
      camera.position.set(10, 8, 10);
      controls.target.set(0, 0, 0);
      controls.update();
    }

    function onTouchStart(event) {
    }

    function onTouchMove(event) {
    }

    let resizeTimeout;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(() => {
        const container = document.getElementById('car-container');
        camera.aspect = container.offsetWidth / container.offsetHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(container.offsetWidth, container.offsetHeight);
      }, 300);
    });

    init();

    function updateBatteryStatus(level, isCharging = false) {
      const batteryProgress = document.getElementById('battery-progress');
      const batteryLevel = document.getElementById('battery-level');
      const chargingStatus = document.getElementById('charging-status');
      const batteryIcon = document.querySelector('.battery-icon');

      batteryLevel.textContent = `${level}%`;
      batteryProgress.style.width = `${level}%`;

      batteryProgress.classList.remove('high', 'medium', 'low');
      if (level > 50) {
        batteryProgress.classList.add('high');
      } else if (level >= 20) {
        batteryProgress.classList.add('medium');
      } else {
        batteryProgress.classList.add('low');
      }

      if (isCharging) {
        chargingStatus.textContent = 'Charging';
        batteryIcon.classList.add('charging');
      } else {
        chargingStatus.textContent = 'On Battery';
        batteryIcon.classList.remove('charging');
      }

      const batteryIconElement = document.querySelector('.battery i');
      if (level > 75) {
        batteryIconElement.className = 'fas fa-battery-full battery-icon';
      } else if (level > 50) {
        batteryIconElement.className = 'fas fa-battery-three-quarters battery-icon';
      } else if (level > 25) {
        batteryIconElement.className = 'fas fa-battery-half battery-icon';
      } else if (level > 10) {
        batteryIconElement.className = 'fas fa-battery-quarter battery-icon';
      } else {
        batteryIconElement.className = 'fas fa-battery-empty battery-icon';
      }
    }

    let currentLevel = 85;
    let isCharging = false;

    setInterval(() => {
      if (isCharging) {
        currentLevel = Math.min(100, currentLevel + 2);
        if (currentLevel >= 98) {
          isCharging = false;
        }
      } else {
        currentLevel = Math.max(5, currentLevel - 2);
        if (currentLevel <= 10) {
          isCharging = true;
        }
      }
      updateBatteryStatus(currentLevel, isCharging);
    }, 5000); 

    updateBatteryStatus(currentLevel, isCharging);

    function updateFuelStatus(level) {
      const fuelProgress = document.getElementById('fuel-progress');
      const fuelLevel = document.getElementById('fuel-level');
      const fuelState = document.getElementById('fuel-state');
      const fuelIcon = document.querySelector('.fuel i');

      fuelLevel.textContent = `${level}%`;
      fuelProgress.style.width = `${level}%`;

      fuelProgress.classList.remove('high', 'medium', 'low');
      if (level > 50) {
        fuelProgress.classList.add('high');
        fuelState.textContent = 'Normal';
        fuelIcon.classList.remove('warning');
      } else if (level >= 20) {
        fuelProgress.classList.add('medium');
        fuelState.textContent = 'Medium';
        fuelIcon.classList.remove('warning');
      } else {
        fuelProgress.classList.add('low');
        fuelState.textContent = 'Low Fuel';
        fuelIcon.classList.add('warning');
      }

      if (level <= 10) {
        fuelIcon.style.color = '#f44336';
      } else {
        fuelIcon.style.color = '#FFC107';
      }
    }

    let currentFuelLevel = 70;
    let fuelDecreasing = true;

    setInterval(() => {
      if (fuelDecreasing) {
        currentFuelLevel = Math.max(5, currentFuelLevel - 2);
        if (currentFuelLevel <= 10) {
          fuelDecreasing = false;
        }
      } else {
        currentFuelLevel = Math.min(100, currentFuelLevel + 2);
        if (currentFuelLevel >= 95) {
          fuelDecreasing = true;
        }
      }
      updateFuelStatus(currentFuelLevel);
    }, 5000); 

    updateFuelStatus(currentFuelLevel);





    function showErrorNotification(message) {
      const notification = document.createElement('div');
      notification.innerHTML = `
        <i class="fas fa-exclamation-circle"></i>
        <span>${message}</span>
        <button onclick="this.parentElement.remove()"><i class="fas fa-times"></i></button>
      `;
      document.body.appendChild(notification);

      setTimeout(() => notification.remove(), 5000);
    }

    const PERFORMANCE_SETTINGS = {
      low: {
        pixelRatio: 0.5,
        targetFPS: 15
      },
      medium: {
        pixelRatio: 0.75,
        targetFPS: 25
      },
      high: {
        pixelRatio: 1.0,
        targetFPS: 45
      }
    };

    function optimizePerformance() {
      let performanceLevel = 'medium'; 

      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
      const isLowEndDevice = isMobile || (navigator.hardwareConcurrency && navigator.hardwareConcurrency <= 2);

      if (isLowEndDevice) {
        performanceLevel = 'low';
      } else if (navigator.hardwareConcurrency && navigator.hardwareConcurrency >= 6) {
        performanceLevel = 'high';
      }

      const settings = PERFORMANCE_SETTINGS[performanceLevel];
      renderer.setPixelRatio(settings.pixelRatio);

      frameInterval = 1000 / settings.targetFPS;

      return settings;
    }

    let frameCount = 0;
    let lastTime = performance.now();
    function getFPS() {
      const now = performance.now();
      const delta = now - lastTime;
      frameCount++;

      if (delta >= 1000) {
        const fps = (frameCount * 1000) / delta;
        frameCount = 0;
        lastTime = now;
        return fps;
      }
      return 60;
    }



    function checkDeviceCapabilities() {

      const hasWebGL = !!window.WebGLRenderingContext;

      if (!hasWebGL) {
        showErrorNotification('Your browser does not support WebGL. Some features may not work properly.');
        return false;
      }

      optimizePerformance();

      return true;
    }

    const deviceSupported = checkDeviceCapabilities();


    function toggleTheme() {
      console.log('Dark Mode functionality has been removed from the project');
    }

  </script>

  <div class="user-window" id="draggable-user">
    <div class="window-header">
      <h3 class="window-title">User Profile</h3>
      <button class="close-btn" data-tooltip="Close"><i class="fas fa-times"></i></button>
    </div>

    <div class="user-content">
      <div class="profile-header">
        <div class="profile-image">
          <img src="https://i.scdn.co/image/ab67616d0000b273f907de96b9a4fbc04accc0d5" alt="User Profile">
          <button class="change-photo-btn"><i class="fas fa-camera"></i></button>
        </div>
        <div class="profile-info">
          <h4 class="user-name">LaneLoons</h4>
          <p class="user-role">System Administrator</p>
        </div>
      </div>

      <div class="profile-stats">
        <div class="stat-item">
          <div class="stat-value">254</div>
          <div class="stat-label">Total Rides</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">1.2k</div>
          <div class="stat-label">Miles</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">4.9</div>
          <div class="stat-label">Rating</div>
        </div>
      </div>

      <div class="progress-section">
        <div class="progress-item">
          <div class="progress-header">
            <span>Profile Completion</span>
            <span>85%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" style="width: 85%"></div>
          </div>
        </div>
      </div>

      <div class="profile-details">
        <div class="info-group">
          <i class="fas fa-user"></i>
          <label>FirstName</label>
          <p>lane</p>
        </div>
        <div class="info-group">
          <i class="fas fa-user"></i>
          <label>LastName</label>
          <p>loons</p>
        </div>
        <div class="info-group">
          <i class="fas fa-envelope"></i>
          <label>Email</label>
          <p>Laneloons@gmail.com</p>
        </div>
        <div class="info-group">
          <i class="fas fa-phone"></i>
          <label>Phone</label>
          <p>+1 234 567 890</p>
        </div>
        <div class="info-group">
          <i class="fas fa-map-marker-alt"></i>
          <label>Location</label>
          <p>Egypt, ElMansoura</p>
        </div>
        <div class="info-group">
          <i class="fas fa-clock"></i>
          <label>Last Active</label>
          <p>Today at 12:45 PM</p>
        </div>
      </div>

      <div class="profile-actions">
        <button class="edit-profile-btn">
          <i class="fas fa-edit"></i>
          Edit Profile
        </button>
        <button class="logout-btn" style="background: #f44336; margin-top: 0.5rem;">
          <i class="fas fa-sign-out-alt"></i>
          Logout
        </button>
        <!-- <button class="settings-btn">
          <i class="fas fa-cog"></i>
          Settings
        </button> -->
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const userProfileBtn = document.getElementById('userProfileBtn');
      const userWindow = document.getElementById('draggable-user');
      const closeBtn = userWindow.querySelector('.close-btn');
      const profileImage = userWindow.querySelector('.profile-image img');
      const changePhotoBtn = userWindow.querySelector('.change-photo-btn');

      async function loadSavedImage() {
        try {
          if (typeof UserProfileManager !== 'undefined') {
            const userData = await UserProfileManager.getUserData();
            if (userData && userData.profileImage) {
              userProfileBtn.src = userData.profileImage;
              profileImage.src = userData.profileImage;
              return;
            }
          }

          const savedImage = localStorage.getItem('userProfileImage');
          if (savedImage) {
            userProfileBtn.src = savedImage;
            profileImage.src = savedImage;

            if (typeof UserProfileManager !== 'undefined') {
              await UserProfileManager.updateProfileImage(savedImage);
            }
          }
        } catch (error) {
          console.error(' Error loading saved image:', error);
        }
      }
      loadSavedImage();
      const fileInput = document.createElement('input');
      fileInput.type = 'file';
      fileInput.accept = 'image/*';
      fileInput.style.display = 'none';
      document.body.appendChild(fileInput);

      function handleFileSelect(e) {
        e.preventDefault();
        e.stopPropagation();
        fileInput.click();
      }

      const newChangePhotoBtn = changePhotoBtn.cloneNode(true);
      changePhotoBtn.parentNode.replaceChild(newChangePhotoBtn, changePhotoBtn);

      newChangePhotoBtn.addEventListener('click', handleFileSelect);

      fileInput.addEventListener('change', async function (e) {
        const file = e.target.files[0];
        if (file) {
          if (!file.type.startsWith('image/')) {
            alert('يرجى اختيار ملف صورة صحيح');
            return;
          }

          if (file.size > 5 * 1024 * 1024) {
            alert('حجم الصورة كبير جداً. يرجى اختيار صورة أصغر من 5MB');
            return;
          }

          const reader = new FileReader();
          reader.onload = async function (event) {
            try {
              const imageUrl = event.target.result;

              userProfileBtn.src = imageUrl;
              profileImage.src = imageUrl;

              localStorage.setItem('userProfileImage', imageUrl);

              if (typeof UserProfileManager !== 'undefined') {
                const success = await UserProfileManager.updateProfileImage(imageUrl);
                if (success) {
                  console.log('✅ Profile image updated successfully');

                  const event = new CustomEvent('profileImageUpdated', { detail: imageUrl });
                  document.dispatchEvent(event);
                } else {
                  console.warn('⚠️ Failed to save image to user data, but localStorage backup is available');
                }
              }

            } catch (error) {
              console.error('❌ Error saving image:', error);
              alert('حدث خطأ أثناء حفظ الصورة. يرجى المحاولة مرة أخرى.');
            }
          };
          reader.onerror = function () {
            console.error('❌ Error reading file');
            alert('حدث خطأ أثناء قراءة الملف. يرجى المحاولة مرة أخرى.');
          };
          reader.readAsDataURL(file);
        }
      });

      userProfileBtn.addEventListener('click', function () {
        userWindow.classList.toggle('show');
      });

      closeBtn.addEventListener('click', function () {
        userWindow.classList.remove('show');
      });

      document.addEventListener('click', function (e) {
        if (!userWindow.contains(e.target) &&
          !userProfileBtn.contains(e.target) &&
          userWindow.classList.contains('show')) {
          userWindow.classList.remove('show');
        }
      });

      const editBtn = userWindow.querySelector('.edit-profile-btn');
      const logoutBtn = userWindow.querySelector('.logout-btn');
      const settingsBtn = userWindow.querySelector('.settings-btn');

      editBtn.addEventListener('click', function () {
        console.log('🔧 Edit Profile button clicked');

        if (typeof ProfileFix !== 'undefined' && ProfileFix.createEditProfileForm) {
          console.log('✅ Using ProfileFix for edit form');
          ProfileFix.createEditProfileForm();
        } else if (typeof EditProfileForm !== 'undefined' && EditProfileForm.showForm) {
          console.log('✅ Using EditProfileForm');
          EditProfileForm.showForm();
        } else {
          console.log('❌ No edit form available, creating simple form...');

          const userData = JSON.parse(localStorage.getItem('userData') || '{}');

          const firstName = prompt('الاسم الأول:', userData.firstName || 'أحمد');
          const lastName = prompt('الاسم الأخير:', userData.lastName || 'محمد');
          const email = prompt('البريد الإلكتروني:', userData.email || 'user@example.com');
          const phone = prompt('رقم الهاتف:', userData.phone || '+20123456789');
          const location = prompt('الموقع:', userData.location || 'القاهرة، مصر');

          if (firstName && lastName && email) {
            const updatedData = {
              ...userData,
              firstName,
              lastName,
              email,
              phone,
              location,
              lastUpdated: new Date().toISOString(),
              lastActive: new Date().toLocaleString('ar-EG')
            };

            localStorage.setItem('userData', JSON.stringify(updatedData));

            if (typeof ProfileFix !== 'undefined' && ProfileFix.updateUserInterface) {
              ProfileFix.updateUserInterface();
            }

            alert('تم تحديث الملف الشخصي بنجاح!');
            console.log('✅ Profile updated successfully:', updatedData);
          }
        }
      });

      logoutBtn.addEventListener('click', function () {
        console.log('🚪 Logout button clicked');

        if (confirm('هل أنت متأكد من تسجيل الخروج؟')) {
          console.log('🔄 User confirmed logout');

          if (typeof ProfileFix !== 'undefined' && ProfileFix.performLogout) {
            console.log('✅ Using ProfileFix for logout');
            ProfileFix.performLogout();
          } else if (typeof AuthGuard !== 'undefined' && AuthGuard.logout) {
            console.log('✅ Using AuthGuard for logout');
            AuthGuard.logout();
          } else {
            console.log('❌ No logout system available, using fallback method...');

            const keysToRemove = [
              'loggedInUserId',
              'userData',
              'userProfileImage',
              'userDataJSON',
              'sessionStartTime',
              'lastActivityTime'
            ];

            keysToRemove.forEach(key => {
              localStorage.removeItem(key);
              console.log(`🗑️ Removed ${key} from localStorage`);
            });

            sessionStorage.clear();
            console.log('✅ User data cleared successfully');

            alert('تم تسجيل الخروج بنجاح');

            setTimeout(() => {
              window.location.href = '../login.html';
            }, 1000);
          }
        }
      });

      if (settingsBtn) {
        settingsBtn.addEventListener('click', function () {
          console.log('Settings clicked');
        });
      }

      setTimeout(() => {
        console.log('🚀 Initializing basic system...');

        const userId = localStorage.getItem('loggedInUserId');
        if (!userId) {
          console.log('⚠️ No user logged in, creating test user...');

          const testUserId = 'test_user_' + Date.now();
          const testUserData = {
            userId: testUserId,
            firstName: 'Ahmed',
            lastName: 'Mohamed',
            email: 'ahmed@example.com',
            phone: '+20123456789',
            location: 'Cairo, Egypt',
            role: 'System Administrator',
            profileImage: 'https://i.scdn.co/image/ab67616d0000b273f907de96b9a4fbc04accc0d5',
            lastUpdated: new Date().toISOString(),
            lastActive: new Date().toLocaleString('en-US'),
            stats: {
              totalRides: 254,
              miles: 1200,
              rating: 4.9
            }
          };

          localStorage.setItem('loggedInUserId', testUserId);
          localStorage.setItem('userData', JSON.stringify(testUserData));

          console.log('✅ Test user created:', testUserId);
        }

        if (typeof ProfileFix !== 'undefined' && ProfileFix.updateUserInterface) {
          ProfileFix.updateUserInterface();
          console.log('✅ UI updated using ProfileFix');
        } else {
          console.log('⚠️ ProfileFix not available, using basic update');

          const userData = JSON.parse(localStorage.getItem('userData') || '{}');
          if (userData.firstName) {
            const userNameElements = document.querySelectorAll('.user-name');
            userNameElements.forEach(element => {
              element.textContent = `${userData.firstName} ${userData.lastName}`;
            });

            const userRoleElements = document.querySelectorAll('.user-role');
            userRoleElements.forEach(element => {
              element.textContent = userData.role || 'User';
            });

            console.log('✅ Basic UI update completed');
          }
        }

        console.log('✅ Basic system initialization completed');
      }, 2000);
    });
  </script>



</body>

</html>